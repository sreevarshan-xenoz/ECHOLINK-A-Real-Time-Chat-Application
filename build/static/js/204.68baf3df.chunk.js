(self.webpackChunkuntitled=self.webpackChunkuntitled||[]).push([[204],{5890:(e,t,o)=>{var s={"./simpleWorker":88964,"./simpleWorker.js":88964,"monaco-editor/esm/vs/base/common/worker/simpleWorker":88964,"monaco-editor/esm/vs/base/common/worker/simpleWorker.js":88964};function r(e){return Promise.resolve().then((()=>{if(!o.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o(s[e])}))}r.keys=()=>Object.keys(s),r.id=5890,e.exports=r},9204:(e,t,o)=>{var s={"./editorBaseApi":[92212],"./editorBaseApi.js":[92212],"./editorSimpleWorker":[10104],"./editorSimpleWorker.js":[10104],"./editorWorker":[84225],"./editorWorker.js":[84225],"./editorWorkerHost":[49487],"./editorWorkerHost.js":[49487],"./findSectionHeaders":[70730],"./findSectionHeaders.js":[70730],"./getIconClasses":[9320,320],"./getIconClasses.js":[9320,320],"./languageFeatureDebounce":[78787],"./languageFeatureDebounce.js":[78787],"./languageFeatures":[18715],"./languageFeatures.js":[18715],"./languageFeaturesService":[24836],"./languageFeaturesService.js":[24836],"./languageService":[75297],"./languageService.js":[75297],"./languagesAssociations":[41011],"./languagesAssociations.js":[41011],"./languagesRegistry":[27780],"./languagesRegistry.js":[27780],"./markerDecorations":[13473],"./markerDecorations.js":[13473],"./markerDecorationsService":[61905],"./markerDecorationsService.js":[61905],"./model":[22597],"./model.js":[22597],"./modelService":[3538],"./modelService.js":[3538],"./resolverService":[3537],"./resolverService.js":[3537],"./semanticTokensDto":[31351,351],"./semanticTokensDto.js":[31351,351],"./semanticTokensProviderStyling":[20452],"./semanticTokensProviderStyling.js":[20452],"./semanticTokensStyling":[63120],"./semanticTokensStyling.js":[63120],"./semanticTokensStylingService":[47129],"./semanticTokensStylingService.js":[47129],"./textModelSync/textModelSync.impl":[75212],"./textModelSync/textModelSync.impl.js":[75212],"./textModelSync/textModelSync.protocol":[79421,421],"./textModelSync/textModelSync.protocol.js":[79421,421],"./textResourceConfiguration":[683],"./textResourceConfiguration.js":[683],"./treeSitterParserService":[24051],"./treeSitterParserService.js":[24051],"./treeViewsDnd":[37542,542],"./treeViewsDnd.js":[37542,542],"./treeViewsDndService":[6443,443],"./treeViewsDndService.js":[6443,443],"./unicodeTextModelHighlighter":[43072],"./unicodeTextModelHighlighter.js":[43072],"monaco-editor/esm/vs/editor/common/services/editorBaseApi":[92212],"monaco-editor/esm/vs/editor/common/services/editorBaseApi.js":[92212],"monaco-editor/esm/vs/editor/common/services/editorSimpleWorker":[10104],"monaco-editor/esm/vs/editor/common/services/editorSimpleWorker.js":[10104],"monaco-editor/esm/vs/editor/common/services/editorWorker":[84225],"monaco-editor/esm/vs/editor/common/services/editorWorker.js":[84225],"monaco-editor/esm/vs/editor/common/services/editorWorkerHost":[49487],"monaco-editor/esm/vs/editor/common/services/editorWorkerHost.js":[49487],"monaco-editor/esm/vs/editor/common/services/findSectionHeaders":[70730],"monaco-editor/esm/vs/editor/common/services/findSectionHeaders.js":[70730],"monaco-editor/esm/vs/editor/common/services/getIconClasses":[9320,320],"monaco-editor/esm/vs/editor/common/services/getIconClasses.js":[9320,320],"monaco-editor/esm/vs/editor/common/services/languageFeatureDebounce":[78787],"monaco-editor/esm/vs/editor/common/services/languageFeatureDebounce.js":[78787],"monaco-editor/esm/vs/editor/common/services/languageFeatures":[18715],"monaco-editor/esm/vs/editor/common/services/languageFeatures.js":[18715],"monaco-editor/esm/vs/editor/common/services/languageFeaturesService":[24836],"monaco-editor/esm/vs/editor/common/services/languageFeaturesService.js":[24836],"monaco-editor/esm/vs/editor/common/services/languageService":[75297],"monaco-editor/esm/vs/editor/common/services/languageService.js":[75297],"monaco-editor/esm/vs/editor/common/services/languagesAssociations":[41011],"monaco-editor/esm/vs/editor/common/services/languagesAssociations.js":[41011],"monaco-editor/esm/vs/editor/common/services/languagesRegistry":[27780],"monaco-editor/esm/vs/editor/common/services/languagesRegistry.js":[27780],"monaco-editor/esm/vs/editor/common/services/markerDecorations":[13473],"monaco-editor/esm/vs/editor/common/services/markerDecorations.js":[13473],"monaco-editor/esm/vs/editor/common/services/markerDecorationsService":[61905],"monaco-editor/esm/vs/editor/common/services/markerDecorationsService.js":[61905],"monaco-editor/esm/vs/editor/common/services/model":[22597],"monaco-editor/esm/vs/editor/common/services/model.js":[22597],"monaco-editor/esm/vs/editor/common/services/modelService":[3538],"monaco-editor/esm/vs/editor/common/services/modelService.js":[3538],"monaco-editor/esm/vs/editor/common/services/resolverService":[3537],"monaco-editor/esm/vs/editor/common/services/resolverService.js":[3537],"monaco-editor/esm/vs/editor/common/services/semanticTokensDto":[31351,351],"monaco-editor/esm/vs/editor/common/services/semanticTokensDto.js":[31351,351],"monaco-editor/esm/vs/editor/common/services/semanticTokensProviderStyling":[20452],"monaco-editor/esm/vs/editor/common/services/semanticTokensProviderStyling.js":[20452],"monaco-editor/esm/vs/editor/common/services/semanticTokensStyling":[63120],"monaco-editor/esm/vs/editor/common/services/semanticTokensStyling.js":[63120],"monaco-editor/esm/vs/editor/common/services/semanticTokensStylingService":[47129],"monaco-editor/esm/vs/editor/common/services/semanticTokensStylingService.js":[47129],"monaco-editor/esm/vs/editor/common/services/textModelSync/textModelSync.impl":[75212],"monaco-editor/esm/vs/editor/common/services/textModelSync/textModelSync.impl.js":[75212],"monaco-editor/esm/vs/editor/common/services/textModelSync/textModelSync.protocol":[79421,421],"monaco-editor/esm/vs/editor/common/services/textModelSync/textModelSync.protocol.js":[79421,421],"monaco-editor/esm/vs/editor/common/services/textResourceConfiguration":[683],"monaco-editor/esm/vs/editor/common/services/textResourceConfiguration.js":[683],"monaco-editor/esm/vs/editor/common/services/treeSitterParserService":[24051],"monaco-editor/esm/vs/editor/common/services/treeSitterParserService.js":[24051],"monaco-editor/esm/vs/editor/common/services/treeViewsDnd":[37542,542],"monaco-editor/esm/vs/editor/common/services/treeViewsDnd.js":[37542,542],"monaco-editor/esm/vs/editor/common/services/treeViewsDndService":[6443,443],"monaco-editor/esm/vs/editor/common/services/treeViewsDndService.js":[6443,443],"monaco-editor/esm/vs/editor/common/services/unicodeTextModelHighlighter":[43072],"monaco-editor/esm/vs/editor/common/services/unicodeTextModelHighlighter.js":[43072]};function r(e){if(!o.o(s,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=s[e],r=t[0];return Promise.all(t.slice(1).map(o.e)).then((()=>o(r)))}r.keys=()=>Object.keys(s),r.id=9204,e.exports=r},36712:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>u});var s=o(65043),r=o(81460),i=o(77158),n=o(25382),a=o(62922),c=o(39665),l=o(70579);const d=e=>{let{roomId:t,language:o="javascript",initialContent:r="",readOnly:d=!1,onContentChange:m=()=>{}}=e;const h=(0,s.useRef)(null),[u,g]=(0,s.useState)(!1),[v,p]=(0,s.useState)([]);return(0,s.useEffect)((()=>{if(!h.current)return;const e=new n.JA,o=new a.$R("ws://localhost:1234",`echolink-collab-${t}`,e);o.on("status",(e=>{g("connected"===e.status)}));const s=e.getText("monaco");r&&""===s.toString()&&s.insert(0,r);new c.h(s,h.current.getModel(),new Set([h.current]),o.awareness);o.awareness.setLocalStateField("user",{name:localStorage.getItem("username")||"Anonymous",color:"#"+Math.floor(16777215*Math.random()).toString(16)});const i=()=>{const e=Array.from(o.awareness.getStates().values()).filter((e=>e.user)).map((e=>e.user));p(e)};o.awareness.on("change",i),i();const l=()=>{m(s.toString())};return s.observe(l),()=>{s.unobserve(l),o.awareness.off("change",i),o.disconnect(),e.destroy()}}),[t,r,m]),(0,l.jsxs)("div",{className:"collaborative-editor-container",children:[(0,l.jsxs)("div",{className:"editor-header",children:[(0,l.jsxs)("div",{className:"connection-status",children:[(0,l.jsx)("span",{className:"status-indicator "+(u?"connected":"disconnected")}),(0,l.jsx)("span",{children:u?"Connected":"Disconnected"})]}),(0,l.jsx)("div",{className:"active-users",children:v.map(((e,t)=>(0,l.jsx)("div",{className:"user-indicator",style:{backgroundColor:e.color},title:e.name,children:e.name.charAt(0).toUpperCase()},t)))})]}),(0,l.jsx)(i.Ay,{height:"70vh",language:o,defaultValue:r,onMount:function(e){h.current=e,e.updateOptions({readOnly:d})},options:{minimap:{enabled:!1},automaticLayout:!0}})]})},m=e=>{let{repo:t}=e;const[o,i]=(0,s.useState)(null),[n,a]=(0,s.useState)(!0),[c,d]=(0,s.useState)(null);return(0,s.useEffect)((()=>{t&&async function(){try{a(!0),d(null);const e=await r.x.getCommitActivity(t.owner.login,t.name),o=await r.x.getContributorStats(t.owner.login,t.name);i({commitActivity:e,contributorStats:o})}catch(e){console.error("Error fetching repository statistics:",e),d("Failed to load repository statistics")}finally{a(!1)}}()}),[t]),t?n?(0,l.jsx)("div",{className:"loading-indicator",children:"Loading repository statistics..."}):c?(0,l.jsx)("div",{className:"error-message",children:c}):(0,l.jsxs)("div",{className:"repo-analytics-dashboard",children:[(0,l.jsx)("h3",{children:"Repository Analytics"}),(0,l.jsxs)("div",{className:"analytics-section",children:[(0,l.jsx)("h4",{children:"Commit Activity"}),null!==o&&void 0!==o&&o.commitActivity?(0,l.jsxs)("div",{className:"commit-activity-chart",children:[(0,l.jsx)("div",{className:"chart-container",children:o.commitActivity.slice(0,12).map(((e,t)=>(0,l.jsxs)("div",{className:"chart-bar-container",children:[(0,l.jsx)("div",{className:"chart-bar",style:{height:`${Math.min(100,5*e.total)}px`},title:`${e.total} commits`}),(0,l.jsx)("div",{className:"chart-label",children:t+1})]},t)))}),(0,l.jsx)("div",{className:"chart-legend",children:"Weeks (most recent 12)"})]}):(0,l.jsx)("p",{children:"No commit activity data available"})]}),(0,l.jsxs)("div",{className:"analytics-section",children:[(0,l.jsx)("h4",{children:"Contributors"}),null!==o&&void 0!==o&&o.contributorStats&&o.contributorStats.length>0?(0,l.jsx)("div",{className:"contributors-list",children:o.contributorStats.sort(((e,t)=>t.total-e.total)).slice(0,5).map(((e,t)=>(0,l.jsxs)("div",{className:"contributor-item",children:[(0,l.jsx)("img",{src:e.author.avatar_url,alt:e.author.login,className:"contributor-avatar"}),(0,l.jsxs)("div",{className:"contributor-info",children:[(0,l.jsx)("div",{className:"contributor-name",children:e.author.login}),(0,l.jsxs)("div",{className:"contributor-commits",children:[e.total," commits"]})]}),(0,l.jsx)("div",{className:"contributor-bar",style:{width:`${Math.min(100,e.total/o.contributorStats[0].total*100)}%`}})]},t)))}):(0,l.jsx)("p",{children:"No contributor data available"})]})]}):null};var h=o(26462);const u=()=>{const{owner:e,repo:t}=(0,h.g)(),[o,n]=((0,h.Zp)(),(0,s.useState)(!1)),[a,c]=(0,s.useState)(!0),[u,g]=(0,s.useState)(null),[v,p]=(0,s.useState)([]),[j,y]=(0,s.useState)(null),[f,x]=(0,s.useState)([]),[w,b]=(0,s.useState)(null),[k,S]=(0,s.useState)(""),[N,C]=(0,s.useState)("javascript"),[T,D]=(0,s.useState)({show:!1,message:"",type:""}),[E,A]=(0,s.useState)([]),[H,$]=(0,s.useState)(""),[R,F]=(0,s.useState)(!1),[_,U]=(0,s.useState)(!1);(0,s.useEffect)((()=>{G()}),[e,t]);const G=async()=>{try{if(c(!0),!r.x.isConfigured)return z("GitHub integration is not configured. Please set up your GitHub credentials in the .env file.","error"),void c(!1);const o=await r.x.initialize();if(n(o),o){const o=r.x.getUserData();g(o),e&&t?await P(e,t):await M()}}catch(o){console.error("Error initializing GitHub:",o),z("Failed to initialize GitHub integration","error")}finally{c(!1)}},M=async()=>{try{c(!0);const e=await r.x.getRepositories();p(e)}catch(e){console.error("Error loading repositories:",e),z("Failed to load repositories","error")}finally{c(!1)}},P=async(e,t)=>{try{c(!0);const s=(await r.x.getRepositories()).find((o=>o.owner.login.toLowerCase()===e.toLowerCase()&&o.name.toLowerCase()===t.toLowerCase()));if(s){y(s),A([{name:s.name,path:""}]);const e=await r.x.getRepositoryContent(s.owner.login,s.name);x(e),b(null),S(""),$("")}else try{const o=await r.x.getRepositoryContent(e,t);if(o){y({name:t,owner:{login:e},id:`${e}/${t}`}),A([{name:t,path:""}]),x(o)}}catch(o){console.error("Error loading specific repository:",o),z("Repository not found or access denied","error")}}catch(s){console.error("Error loading repositories:",s),z("Failed to load repository information","error")}finally{c(!1)}},I=async e=>{try{c(!0),b(e);const t=e.name.split(".").pop().toLowerCase();C({js:"javascript",jsx:"javascript",ts:"typescript",tsx:"typescript",py:"python",java:"java",html:"html",css:"css",json:"json",md:"markdown",php:"php",rb:"ruby",go:"go",c:"c",cpp:"cpp",cs:"csharp",swift:"swift",kt:"kotlin",rs:"rust"}[t]||"plaintext");const o=await r.x.getFileContent(e.download_url);S(o)}catch(t){console.error("Error loading file content:",t),z("Failed to load file content","error")}finally{c(!1)}},L=e=>{S(e)},z=(e,t)=>{D({show:!0,message:e,type:t}),setTimeout((()=>D({show:!1,message:"",type:""})),3e3)};return a&&!o?(0,l.jsxs)("div",{className:"github-loading",children:[(0,l.jsx)("div",{className:"loading-spinner"}),(0,l.jsx)("p",{children:"Loading GitHub integration..."})]}):(0,l.jsxs)("div",{className:"github-integration-container",children:[(0,l.jsxs)("div",{className:"github-header",children:[(0,l.jsx)("div",{className:"github-navigation",children:(0,l.jsx)(h.N_,{to:"/github",className:"github-back-link",children:"\u2190 Back to GitHub Home"})}),(0,l.jsx)("h2",{children:"Repository Browser"}),j&&(0,l.jsx)("div",{className:"selected-repo-info",children:(0,l.jsxs)("h3",{children:[(0,l.jsx)("span",{className:"repo-owner",children:j.owner.login}),(0,l.jsx)("span",{className:"repo-separator",children:"/"}),(0,l.jsx)("span",{className:"repo-name",children:j.name})]})})]}),o?(0,l.jsxs)("div",{className:"github-connected-section",children:[(0,l.jsx)("div",{className:"github-user-info",children:u&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("img",{src:u.avatar_url,alt:"GitHub Avatar",className:"github-avatar"}),(0,l.jsxs)("div",{className:"github-user-details",children:[(0,l.jsx)("h3",{children:u.name||u.login}),(0,l.jsxs)("p",{children:["@",u.login]}),(0,l.jsx)("button",{className:"github-disconnect-button",onClick:async()=>{try{c(!0),await r.x.disconnect(),n(!1),g(null),p([]),y(null),x([]),b(null),S(""),z("GitHub account disconnected successfully","success")}catch(e){console.error("Error disconnecting GitHub account:",e),z("Failed to disconnect GitHub account","error")}finally{c(!1)}},children:"Disconnect"})]})]})}),(0,l.jsxs)("div",{className:"github-workspace",children:[(0,l.jsxs)("div",{className:"github-sidebar",children:[(0,l.jsx)("h3",{children:"Your Repositories"}),(0,l.jsx)("div",{className:"repo-list",children:v.length>0?v.map((e=>(0,l.jsxs)("div",{className:"repo-item "+(j&&j.id===e.id?"selected":""),onClick:()=>(async e=>{try{c(!0),y(e),$(""),A([{name:e.name,path:""}]);const t=await r.x.getRepositoryContent(e.owner.login,e.name);x(t),b(null),S(""),F(!1),U(!1)}catch(t){console.error("Error loading repository content:",t),z("Failed to load repository content","error")}finally{c(!1)}})(e),children:[(0,l.jsx)("div",{className:"repo-icon",children:"\ud83d\udcc1"}),(0,l.jsxs)("div",{className:"repo-details",children:[(0,l.jsx)("h4",{children:e.name}),(0,l.jsx)("p",{children:e.description||"No description"}),(0,l.jsxs)("div",{className:"repo-meta",children:[(0,l.jsxs)("span",{children:["\u2b50 ",e.stargazers_count]}),(0,l.jsxs)("span",{children:["\ud83c\udf74 ",e.forks_count]})]})]})]},e.id))):(0,l.jsx)("p",{className:"no-repos-message",children:"No repositories found"})})]}),(0,l.jsx)("div",{className:"github-content",children:j?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"repo-header",children:[(0,l.jsx)("h3",{children:j.name}),(0,l.jsx)("div",{className:"repo-actions",children:(0,l.jsx)("button",{className:"analytics-toggle "+(_?"active":""),onClick:()=>U(!_),children:_?"Hide Analytics":"Show Analytics"})}),(0,l.jsx)("div",{className:"breadcrumbs",children:E.map(((e,t)=>(0,l.jsxs)("span",{children:[(0,l.jsx)("span",{className:"breadcrumb-item",onClick:()=>(async(e,t)=>{if(j)try{c(!0),$(e.path);const o=E.slice(0,t+1);A(o);const s=await r.x.getRepositoryContent(j.owner.login,j.name,e.path);x(s),b(null),S("")}catch(o){console.error("Error navigating breadcrumb:",o),z("Failed to navigate breadcrumb","error")}finally{c(!1)}})(e,t),children:e.name}),t<E.length-1&&(0,l.jsx)("span",{className:"breadcrumb-separator",children:"/"})]},t)))})]}),w?(0,l.jsxs)("div",{className:"file-editor",children:[(0,l.jsxs)("div",{className:"file-editor-header",children:[(0,l.jsx)("h4",{children:w.name}),(0,l.jsx)("button",{className:"save-file-button",onClick:async()=>{if(w&&j)try{c(!0);const e=`Update ${w.name} via ECHOLINK`;await r.x.updateFile(j.owner.login,j.name,w.path,k,e,w.sha),z("File saved successfully","success"),await I(w)}catch(e){console.error("Error saving file:",e),z("Failed to save file","error")}finally{c(!1)}},children:"Save Changes"}),(0,l.jsx)("button",{className:"mode-toggle "+(R?"active":""),onClick:()=>F(!R),children:R?"Collaborative Mode":"Solo Mode"})]}),(0,l.jsx)("div",{className:"monaco-editor-container",children:R?(0,l.jsx)(d,{roomId:`${j.owner.login}-${j.name}-${H}-${w.name}`,language:N,initialContent:k,onContentChange:L}):(0,l.jsx)(i.Ay,{height:"500px",language:N,value:k,onChange:L,theme:"vs-dark",options:{minimap:{enabled:!0},scrollBeyondLastLine:!1,fontSize:14,wordWrap:"on"}})})]}):(0,l.jsx)("div",{className:"repo-browser",children:_?(0,l.jsx)(m,{repo:j}):f.length>0?(0,l.jsx)("div",{className:"repo-items",children:f.sort(((e,t)=>"dir"===e.type&&"dir"!==t.type?-1:"dir"!==e.type&&"dir"===t.type?1:e.name.localeCompare(t.name))).map((e=>(0,l.jsxs)("div",{className:`repo-browser-item ${e.type}`,onClick:()=>"dir"===e.type?(async e=>{if(j)try{c(!0);const t=H?`${H}/${e.name}`:e.name;$(t);const o=[...E];o.push({name:e.name,path:t}),A(o);const s=await r.x.getRepositoryContent(j.owner.login,j.name,t);x(s),b(null),S("")}catch(t){console.error("Error navigating directory:",t),z("Failed to navigate directory","error")}finally{c(!1)}})(e):I(e),children:[(0,l.jsx)("div",{className:"item-icon",children:"dir"===e.type?"\ud83d\udcc1":"\ud83d\udcc4"}),(0,l.jsx)("div",{className:"item-name",children:e.name})]},e.sha)))}):(0,l.jsx)("div",{className:"empty-repo-message",children:(0,l.jsx)("p",{children:"This repository is empty"})})})]}):(0,l.jsxs)("div",{className:"select-repo-message",children:[(0,l.jsx)("div",{className:"message-icon",children:"\ud83d\udcc1"}),(0,l.jsx)("h3",{children:"Select a Repository"}),(0,l.jsx)("p",{children:"Choose a repository from the sidebar to view its contents"})]})})]})]}):(0,l.jsxs)("div",{className:"github-connect-section",children:[(0,l.jsxs)("div",{className:"github-connect-card",children:[(0,l.jsx)("div",{className:"github-logo",children:(0,l.jsx)("svg",{height:"68",viewBox:"0 0 16 16",width:"68",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})})}),(0,l.jsx)("h3",{children:"Connect to GitHub"}),(0,l.jsx)("p",{children:"Link your GitHub account to access your repositories and collaborate on code directly from ECHOLINK."}),(0,l.jsx)("button",{className:"github-connect-button",onClick:()=>{try{const e=r.x.getAuthUrl();console.log("Redirecting to GitHub auth URL:",e),window.location.href=e}catch(e){console.error("Error initiating GitHub connection:",e),z("Failed to connect to GitHub: "+e.message,"error")}},children:"Connect GitHub Account"}),(0,l.jsx)("button",{className:"github-debug-button",onClick:async()=>{try{c(!0),z("Running GitHub connection diagnostics...","info");const e=new URLSearchParams(window.location.search),t=e.get("code"),o=e.get("state");console.log("GitHub Integration Debug:"),console.log("- URL has code param:",!!t),console.log("- URL has state param:",!!o),console.log("- GitHub service configured:",r.x.isConfigured),console.log("- Client ID available:",!0),console.log("- Redirect URI:",r.x.redirectUri);const s=await r.x.initialize();console.log("- Service initialized:",s),z("Diagnostic data logged to console","info")}catch(e){console.error("Debug error:",e),z("Error during diagnostics: "+e.message,"error")}finally{c(!1)}},children:"Diagnose Connection Issues"})]}),(0,l.jsxs)("div",{className:"github-features",children:[(0,l.jsxs)("div",{className:"feature-item",children:[(0,l.jsx)("div",{className:"feature-icon",children:"\ud83d\udcc1"}),(0,l.jsx)("h4",{children:"Access Repositories"}),(0,l.jsx)("p",{children:"Browse and access all your GitHub repositories"})]}),(0,l.jsxs)("div",{className:"feature-item",children:[(0,l.jsx)("div",{className:"feature-icon",children:"\ud83d\udcdd"}),(0,l.jsx)("h4",{children:"Edit Code"}),(0,l.jsx)("p",{children:"View and edit code with syntax highlighting"})]}),(0,l.jsxs)("div",{className:"feature-item",children:[(0,l.jsx)("div",{className:"feature-icon",children:"\ud83d\udd04"}),(0,l.jsx)("h4",{children:"Sync Changes"}),(0,l.jsx)("p",{children:"Commit changes directly to your repositories"})]})]})]}),T.show&&(0,l.jsx)("div",{className:`github-notification ${T.type}`,children:T.message})]})}},81460:(e,t,o)=>{"use strict";o.d(t,{x:()=>r});var s=o(58900);const r=new class{constructor(){this.clientId="Ov23liEUbi2KvL5wafTt",this.redirectUri=`${window.location.origin}/dashboard`,console.log("GitHub redirect URI:",this.redirectUri),this.scope="repo user",this.accessToken=null,this.userData=null,this.isConfigured=!!this.clientId}async initialize(){try{if(!this.isConfigured)return console.error("GitHub integration is not configured. Please set REACT_APP_GITHUB_CLIENT_ID in your .env file."),!1;const e=new URLSearchParams(window.location.search),t=e.get("code"),o=e.get("state");if(t&&o){console.log("Detected GitHub OAuth callback in URL");if(await this.handleCallback(t,o)){const e=window.location.pathname;return window.history.replaceState({},document.title,e),!0}return!1}const{data:{user:r}}=await s.ND.auth.getUser();if(r){const{data:e}=await s.ND.from("profiles").select("github_access_token").eq("id",r.id).single();if(null!==e&&void 0!==e&&e.github_access_token)return this.accessToken=e.github_access_token,await this.fetchUserData(),!0}return!1}catch(e){return console.error("Error initializing GitHub service:",e),!1}}getAuthUrl(){if(!this.isConfigured)return console.error("GitHub integration is not configured. Please set REACT_APP_GITHUB_CLIENT_ID in your .env file."),"#";return`https://github.com/login/oauth/authorize?${new URLSearchParams({client_id:this.clientId,redirect_uri:this.redirectUri,scope:this.scope,state:this.generateRandomState()}).toString()}`}async getCommitActivity(e,t){try{const o=await fetch(`https://api.github.com/repos/${e}/${t}/stats/commit_activity`,{headers:{Authorization:`token ${this.accessToken}`}});if(!o.ok)throw new Error("Failed to fetch commit activity");return await o.json()}catch(o){throw console.error("Error fetching commit activity:",o),o}}async getContributorStats(e,t){try{const o=await fetch(`https://api.github.com/repos/${e}/${t}/stats/contributors`,{headers:{Authorization:`token ${this.accessToken}`}});if(!o.ok)throw new Error("Failed to fetch contributor stats");return await o.json()}catch(o){throw console.error("Error fetching contributor stats:",o),o}}generateRandomState(){const e=Math.random().toString(36).substring(2,15);return localStorage.setItem("github_oauth_state",e),e}async handleCallback(e,t){try{if(t!==localStorage.getItem("github_oauth_state"))throw new Error("Invalid state parameter");const o=`http://${window.location.hostname}:5000`;console.log("Using server URL for GitHub OAuth:",o);const s=await fetch(`${o}/api/github/oauth/token`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e})});if(!s.ok){const e=await s.text();throw console.error("Token exchange response:",e),new Error("Failed to exchange code for token: "+e)}const r=await s.json();return this.accessToken=r.access_token,await this.saveTokenToProfile(),await this.fetchUserData(),!0}catch(o){return console.error("GitHub OAuth error:",o),!1}finally{localStorage.removeItem("github_oauth_state")}}async saveTokenToProfile(){try{const{data:{user:e}}=await s.ND.auth.getUser();if(e&&this.accessToken&&(await s.ND.from("profiles").upsert({id:e.id,github_access_token:this.accessToken,updated_at:new Date}),this.userData)){const{saveGitHubInfo:t}=await Promise.resolve().then(o.bind(o,58900));await t(e.id,{accessToken:this.accessToken,username:this.userData.login,avatarUrl:this.userData.avatar_url,name:this.userData.name,email:this.userData.email})}}catch(e){console.error("Error saving GitHub token:",e)}}async fetchUserData(){if(!this.accessToken)return null;try{const e=await fetch("https://api.github.com/user",{headers:{Authorization:`token ${this.accessToken}`}});if(!e.ok)throw new Error("Failed to fetch GitHub user data");return this.userData=await e.json(),this.userData}catch(e){return console.error("Error fetching GitHub user data:",e),null}}async getRepositories(){if(!this.accessToken)return[];try{const e=await fetch("https://api.github.com/user/repos?sort=updated",{headers:{Authorization:`token ${this.accessToken}`}});if(!e.ok)throw new Error("Failed to fetch repositories");return await e.json()}catch(e){return console.error("Error fetching repositories:",e),[]}}async getRepositoryContent(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!this.accessToken)return null;try{const s=await fetch(`https://api.github.com/repos/${e}/${t}/contents/${o}`,{headers:{Authorization:`token ${this.accessToken}`}});if(!s.ok)throw new Error("Failed to fetch repository content");return await s.json()}catch(s){return console.error("Error fetching repository content:",s),null}}async getFileContent(e){if(!this.accessToken)return null;try{const t=await fetch(e,{headers:{Authorization:`token ${this.accessToken}`,Accept:"application/vnd.github.v3.raw"}});if(!t.ok)throw new Error("Failed to fetch file content");return await t.text()}catch(t){return console.error("Error fetching file content:",t),null}}async updateFile(e,t,o,s,r,i){if(!this.accessToken)return!1;try{const n=await fetch(`https://api.github.com/repos/${e}/${t}/contents/${o}`,{method:"PUT",headers:{Authorization:`token ${this.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({message:r,content:btoa(s),sha:i})});if(!n.ok)throw new Error("Failed to update file");return await n.json()}catch(n){return console.error("Error updating file:",n),!1}}async disconnect(){try{this.accessToken=null,this.userData=null;const{data:{user:e}}=await s.ND.auth.getUser();return e&&await s.ND.from("profiles").upsert({id:e.id,github_access_token:null,updated_at:new Date}),!0}catch(e){return console.error("Error disconnecting GitHub account:",e),!1}}isConnected(){return!!this.accessToken&&!!this.userData}getUserData(){return this.userData}async getPullRequests(e,t){if(!this.accessToken)return[];try{const o=await fetch(`https://api.github.com/repos/${e}/${t}/pulls?state=all`,{headers:{Authorization:`token ${this.accessToken}`}});if(!o.ok)throw new Error("Failed to fetch pull requests");return await o.json()}catch(o){return console.error("Error fetching pull requests:",o),[]}}async getCommits(e,t){if(!this.accessToken)return[];try{const o=await fetch(`https://api.github.com/repos/${e}/${t}/commits`,{headers:{Authorization:`token ${this.accessToken}`}});if(!o.ok)throw new Error("Failed to fetch commits");return await o.json()}catch(o){return console.error("Error fetching commits:",o),[]}}async getProjects(){if(!this.accessToken)return[];try{const e=await fetch("https://api.github.com/user/projects",{headers:{Authorization:`token ${this.accessToken}`,Accept:"application/vnd.github.inertia-preview+json"}});if(!e.ok)throw new Error("Failed to fetch projects");return await e.json()}catch(e){return console.error("Error fetching projects:",e),[]}}async searchRepositories(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.accessToken)return{items:[],total_count:0};try{const o=new URLSearchParams({q:e,sort:t.sort||"stars",order:t.order||"desc",per_page:t.per_page||30,page:t.page||1});t.language&&o.append("q",`language:${t.language}`);const s=await fetch(`https://api.github.com/search/repositories?${o.toString()}`,{headers:{Authorization:`token ${this.accessToken}`,Accept:"application/vnd.github.v3+json"}});if(!s.ok)throw new Error("Failed to search repositories");return await s.json()}catch(o){return console.error("Error searching repositories:",o),{items:[],total_count:0}}}}}}]);
//# sourceMappingURL=204.68baf3df.chunk.js.map