"use strict";(self.webpackChunkuntitled=self.webpackChunkuntitled||[]).push([[653],{66653:(e,r,n)=>{n.r(r),n.d(r,{default:()=>P});var i=n(65043),t=n(44093),s=n(22107),a=n(5371),o=n(96148),l=n(28846),c=n(87139),d=n(97359),u=n(39081),h=n(70579),m=n(56294),x=n(92970),b=n(83290);(0,b.i7)({"0%":{strokeDasharray:"1, 400",strokeDashoffset:"0"},"50%":{strokeDasharray:"400, 400",strokeDashoffset:"-100"},"100%":{strokeDasharray:"400, 400",strokeDashoffset:"-260"}}),(0,b.i7)({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}});const g=(0,b.i7)({"0%":{left:"-40%"},"100%":{left:"100%"}}),f=(0,b.i7)({from:{backgroundPosition:"1rem 0"},to:{backgroundPosition:"0 0"}});var j=n(55003),p=n(52695),S=n(36059);const[v,y]=(0,x.q)({name:"ProgressStylesContext",errorMessage:"useProgressStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Progress />\" "}),R=(0,j.R)(((e,r)=>{const{min:n,max:i,value:t,isIndeterminate:s,role:a,...o}=e,l=function(e){const{value:r=0,min:n,max:i,valueText:t,getValueText:s,isIndeterminate:a,role:o="progressbar"}=e,l=function(e,r,n){return 100*(e-r)/(n-r)}(r,n,i);return{bind:{"data-indeterminate":a?"":void 0,"aria-valuemax":i,"aria-valuemin":n,"aria-valuenow":a?void 0:r,"aria-valuetext":(()=>{if(null!=r)return"function"===typeof s?s(r,l):t})(),role:o},percent:l,value:r}}({value:t,min:n,max:i,isIndeterminate:s,role:a}),c={height:"100%",...y().filledTrack};return(0,h.jsx)(p.B.div,{ref:r,style:{width:`${l.percent}%`,...o.style},...l.bind,...o,__css:c})})),k=(0,j.R)(((e,r)=>{const{value:n,min:i=0,max:t=100,hasStripe:s,isAnimated:a,children:o,borderRadius:l,isIndeterminate:c,"aria-label":d,"aria-labelledby":u,"aria-valuetext":x,title:b,role:j,...y}=(0,m.M)(e),k=(0,S.o)("Progress",e),w=l??k.track?.borderRadius,z={...!c&&s&&a&&{animation:`${f} 1s linear infinite`},...c&&{position:"absolute",willChange:"left",minWidth:"50%",animation:`${g} 1s ease infinite normal none running`}},C={overflow:"hidden",position:"relative",...k.track};return(0,h.jsx)(p.B.div,{ref:r,borderRadius:w,__css:C,...y,children:(0,h.jsxs)(v,{value:k,children:[(0,h.jsx)(R,{"aria-label":d,"aria-labelledby":u,"aria-valuetext":x,min:i,max:t,value:n,isIndeterminate:c,css:z,borderRadius:w,title:b,role:j}),o]})})}));k.displayName="Progress";var w=n(99956),z=n(42703),C=n(10202),D=n(60184),E=n(80210);const P=e=>{let{onSendVoiceMessage:r}=e;const[n,m]=(0,i.useState)(!0),[x,b]=(0,i.useState)(!1),[g,f]=(0,i.useState)(0),[j,p]=(0,i.useState)(null),[S,v]=(0,i.useState)(null),[y,R]=(0,i.useState)(!1),[P,U]=(0,i.useState)([]),I=(0,i.useRef)(null),K=(0,i.useRef)([]),L=(0,i.useRef)(null),M=(0,i.useRef)(new Audio),W=(0,t.dU)("gray.50","gray.800"),T=(0,t.dU)("blue.50","gray.700"),O=(0,t.dU)("blue.200","gray.600"),$=(0,t.dU)("white","gray.700"),B=e=>{const r=e%60;return`${Math.floor(e/60).toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`},V=()=>{M.current&&(M.current.pause(),R(!1))},_=()=>{S&&URL.revokeObjectURL(S),p(null),v(null),f(0),M.current&&(M.current.pause(),R(!1))};return(0,i.useEffect)((()=>{const e=()=>{R(!1)};return M.current.addEventListener("ended",e),()=>{M.current.removeEventListener("ended",e)}}),[]),(0,i.useEffect)((()=>()=>{L.current&&clearInterval(L.current),S&&URL.revokeObjectURL(S)}),[S]),(0,h.jsxs)(s.a,{bg:W,borderRadius:"md",borderWidth:"1px",borderColor:O,mb:4,overflow:"hidden",children:[(0,h.jsxs)(a.s,{align:"center",p:2,bg:T,borderBottomWidth:n?"1px":"0",borderColor:O,justifyContent:"space-between",cursor:"pointer",onClick:()=>{m(!n)},children:[(0,h.jsxs)(o.z,{children:[(0,h.jsx)(E.h,{icon:D.i0t,size:14,mr:2}),(0,h.jsx)(l.D,{size:"xs",children:"Voice Messages"}),x&&(0,h.jsx)(c.E,{colorScheme:"red",variant:"solid",fontSize:"10px",animation:"pulse 1.5s infinite",children:"REC"})]}),(0,h.jsx)(E.h,{icon:n?D.Ucs:D.Vr3,size:12})]}),(0,h.jsx)(d.S,{in:n,animateOpacity:!0,children:(0,h.jsxs)(s.a,{p:3,children:[(0,h.jsxs)(s.a,{bg:$,p:2,borderRadius:"md",borderWidth:"1px",borderColor:O,mb:2,children:[(0,h.jsxs)(a.s,{justify:"space-between",align:"center",mb:2,children:[(0,h.jsx)(u.E,{fontSize:"xs",fontWeight:"bold",children:x?"Recording...":S?"Recording ready":"Ready to record"}),(0,h.jsx)(u.E,{fontSize:"xs",fontWeight:"bold",color:x?"red.500":"gray.500",children:B(g)})]}),x&&(0,h.jsx)(k,{size:"xs",colorScheme:"red",isIndeterminate:!0,mb:2}),(0,h.jsxs)(a.s,{justify:"center",gap:2,children:[!x&&!S&&(0,h.jsx)(w.m,{label:"Start recording",children:(0,h.jsx)(z.K,{icon:(0,h.jsx)(E.h,{icon:D.i0t}),colorScheme:"red",size:"sm",isRound:!0,onClick:async()=>{try{const e=await navigator.mediaDevices.getUserMedia({audio:!0}),r=new MediaRecorder(e);I.current=r,K.current=[],r.ondataavailable=e=>{e.data.size>0&&K.current.push(e.data)},r.onstop=()=>{const r=new Blob(K.current,{type:"audio/wav"}),n=URL.createObjectURL(r);p(r),v(n),e.getTracks().forEach((e=>e.stop()))},r.start(),b(!0),f(0),L.current=setInterval((()=>{f((e=>e+1))}),1e3)}catch(e){console.error("Error accessing microphone:",e),alert("Could not access microphone. Please check permissions.")}},"aria-label":"Start recording"})}),x&&(0,h.jsx)(w.m,{label:"Stop recording",children:(0,h.jsx)(z.K,{icon:(0,h.jsx)(E.h,{icon:D.wFo}),colorScheme:"red",size:"sm",isRound:!0,onClick:()=>{I.current&&x&&(I.current.stop(),b(!1),clearInterval(L.current))},"aria-label":"Stop recording"})}),S&&!y&&(0,h.jsx)(w.m,{label:"Play recording",children:(0,h.jsx)(z.K,{icon:(0,h.jsx)(E.h,{icon:D.gSK}),colorScheme:"blue",size:"sm",isRound:!0,onClick:()=>{S&&(M.current.src=S,M.current.play(),R(!0))},"aria-label":"Play recording"})}),S&&y&&(0,h.jsx)(w.m,{label:"Pause playback",children:(0,h.jsx)(z.K,{icon:(0,h.jsx)(E.h,{icon:D.kwt}),colorScheme:"blue",size:"sm",isRound:!0,onClick:V,"aria-label":"Pause playback"})}),S&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(w.m,{label:"Delete recording",children:(0,h.jsx)(z.K,{icon:(0,h.jsx)(E.h,{icon:D.qbC}),colorScheme:"gray",size:"sm",isRound:!0,onClick:_,"aria-label":"Delete recording"})}),(0,h.jsx)(w.m,{label:"Send voice message",children:(0,h.jsx)(z.K,{icon:(0,h.jsx)(E.h,{icon:D.Cer}),colorScheme:"green",size:"sm",isRound:!0,onClick:()=>{if(j&&r){const e={id:Date.now(),duration:g,timestamp:(new Date).toISOString(),blob:j,url:S};U((r=>[e,...r].slice(0,5))),r(j,g),_()}},"aria-label":"Send voice message"})})]})]})]}),P.length>0&&(0,h.jsxs)(s.a,{children:[(0,h.jsx)(u.E,{fontSize:"xs",fontWeight:"bold",mb:1,children:"Recent Recordings:"}),(0,h.jsx)(C.T,{spacing:1,align:"stretch",children:P.map((e=>(0,h.jsxs)(a.s,{bg:$,p:1,borderRadius:"sm",fontSize:"xs",align:"center",justify:"space-between",children:[(0,h.jsxs)(o.z,{children:[(0,h.jsx)(z.K,{icon:(0,h.jsx)(E.h,{icon:D.gSK,size:10}),size:"xs",colorScheme:"blue",variant:"ghost",onClick:()=>{return r=e.url,V(),M.current.src=r,M.current.play(),void R(!0);var r},"aria-label":"Play recording"}),(0,h.jsx)(u.E,{children:B(e.duration)})]}),(0,h.jsx)(u.E,{fontSize:"10px",color:"gray.500",children:new Date(e.timestamp).toLocaleTimeString()})]},e.id)))})]})]})})]})}}}]);
//# sourceMappingURL=653.3c4e0b27.chunk.js.map