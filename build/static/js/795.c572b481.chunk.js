"use strict";(self.webpackChunkuntitled=self.webpackChunkuntitled||[]).push([[795],{44795:(e,r,t)=>{t.r(r),t.d(r,{default:()=>F});var n=t(65043),i=t(96870),c=t(44093),s=t(22107),o=t(5371),l=t(96148),a=t(28846),h=t(97359),d=t(96351),u=t(99956),x=t(42703),g=t(49355),b=t(75780),p=t(91765),j=t(15983),f=t(33192),m=t(73212),w=t(7360),C=t(39081),y=t(60184),k=t(80210),S=t(70579);const F=e=>{let{onShareWhiteboard:r}=e;const[t,F]=(0,n.useState)(!0),[v,R]=(0,n.useState)("pencil"),[z,E]=(0,n.useState)("#000000"),[W,I]=(0,n.useState)(3),[M,K]=(0,n.useState)(!1),[U,D]=(0,n.useState)([]),[A,P]=(0,n.useState)([]),$=(0,n.useRef)(null),L=(0,n.useRef)(null),O=(0,n.useRef)(null),{isOpen:B,onToggle:H,onClose:T}=(0,i.j)(),q=(0,c.dU)("gray.50","gray.800"),J=(0,c.dU)("blue.50","gray.700"),Q=(0,c.dU)("blue.200","gray.600"),V=(0,c.dU)("white","gray.700");(0,n.useEffect)((()=>{if(!t)return;const e=$.current;if(!e)return;e.width=2*e.offsetWidth,e.height=2*e.offsetHeight,e.style.width=`${e.offsetWidth}px`,e.style.height=`${e.offsetHeight}px`;const r=e.getContext("2d");r.scale(2,2),r.lineCap="round",r.lineJoin="round",r.strokeStyle=z,r.lineWidth=W,L.current=r,X()}),[t]),(0,n.useEffect)((()=>{L.current&&(L.current.strokeStyle=z,L.current.lineWidth=W)}),[z,W]),(0,n.useEffect)((()=>{const e=()=>{if(!$.current||!L.current)return;const e=document.createElement("canvas"),r=e.getContext("2d");e.width=$.current.width,e.height=$.current.height,r.drawImage($.current,0,0),$.current.width=2*$.current.offsetWidth,$.current.height=2*$.current.offsetHeight,$.current.style.width=`${$.current.offsetWidth}px`,$.current.style.height=`${$.current.offsetHeight}px`,L.current.scale(2,2),L.current.lineCap="round",L.current.lineJoin="round",L.current.strokeStyle=z,L.current.lineWidth=W,L.current.drawImage(e,0,0)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[z,W]);const X=()=>{if(!$.current)return;const e=$.current.toDataURL("image/png");D((r=>[...r,e])),P([])},Y=()=>{M&&("pencil"!==v&&"eraser"!==v||L.current.closePath(),K(!1),X())};return(0,S.jsxs)(s.a,{bg:q,borderRadius:"md",borderWidth:"1px",borderColor:Q,mb:4,overflow:"hidden",children:[(0,S.jsxs)(o.s,{align:"center",p:2,bg:J,borderBottomWidth:t?"1px":"0",borderColor:Q,justifyContent:"space-between",cursor:"pointer",onClick:()=>{F(!t)},children:[(0,S.jsxs)(l.z,{children:[(0,S.jsx)(k.h,{icon:y.Mbp,size:14,mr:2}),(0,S.jsx)(a.D,{size:"xs",children:"Whiteboard"})]}),(0,S.jsx)(k.h,{icon:t?y.Ucs:y.Vr3,size:12})]}),(0,S.jsx)(h.S,{in:t,animateOpacity:!0,children:(0,S.jsxs)(s.a,{p:3,children:[(0,S.jsxs)(o.s,{mb:2,gap:1,children:[(0,S.jsxs)(d.e,{size:"xs",isAttached:!0,variant:"outline",children:[(0,S.jsx)(u.m,{label:"Pencil",children:(0,S.jsx)(x.K,{icon:(0,S.jsx)(k.h,{icon:y.Mbp}),colorScheme:"pencil"===v?"blue":"gray",onClick:()=>R("pencil"),"aria-label":"Pencil tool"})}),(0,S.jsx)(u.m,{label:"Eraser",children:(0,S.jsx)(x.K,{icon:(0,S.jsx)(k.h,{icon:y.Gml}),colorScheme:"eraser"===v?"blue":"gray",onClick:()=>R("eraser"),"aria-label":"Eraser tool"})}),(0,S.jsx)(u.m,{label:"Circle",children:(0,S.jsx)(x.K,{icon:(0,S.jsx)(k.h,{icon:y.Qp1}),colorScheme:"circle"===v?"blue":"gray",onClick:()=>R("circle"),"aria-label":"Circle tool"})}),(0,S.jsx)(u.m,{label:"Rectangle",children:(0,S.jsx)(x.K,{icon:(0,S.jsx)(k.h,{icon:y.$qz}),colorScheme:"rectangle"===v?"blue":"gray",onClick:()=>R("rectangle"),"aria-label":"Rectangle tool"})})]}),(0,S.jsxs)(g.A,{isOpen:B,onClose:T,placement:"bottom",closeOnBlur:!0,children:[(0,S.jsx)(b.W,{children:(0,S.jsx)(x.K,{size:"xs",icon:(0,S.jsx)(s.a,{w:"14px",h:"14px",borderRadius:"sm",bg:z,borderWidth:"1px",borderColor:"gray.300"}),onClick:H,"aria-label":"Color picker"})}),(0,S.jsxs)(p.h,{width:"auto",p:2,children:[(0,S.jsx)(j.R,{}),(0,S.jsx)(f.e,{p:2,children:(0,S.jsx)(m.r,{columns:5,spacing:2,children:["#000000","#FFFFFF","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#FFA500","#800080"].map((e=>(0,S.jsx)(s.a,{w:"20px",h:"20px",borderRadius:"sm",bg:e,borderWidth:"1px",borderColor:"gray.300",cursor:"pointer",onClick:()=>{E(e),T()},_hover:{transform:"scale(1.1)"}},e)))})})]})]}),(0,S.jsx)(s.a,{flex:"1",px:2,children:(0,S.jsxs)(w.Ap,{"aria-label":"brush-size",defaultValue:3,min:1,max:20,step:1,onChange:I,colorScheme:"blue",size:"sm",children:[(0,S.jsx)(w.hB,{children:(0,S.jsx)(w.hJ,{})}),(0,S.jsx)(w.OQ,{boxSize:3})]})}),(0,S.jsxs)(d.e,{size:"xs",isAttached:!0,variant:"outline",children:[(0,S.jsx)(u.m,{label:"Undo",children:(0,S.jsx)(x.K,{icon:(0,S.jsx)(k.h,{icon:y.EEI}),onClick:()=>{if(U.length<=1)return;const e=U.pop();P((r=>[...r,e]));const r=U[U.length-1],t=new Image;t.src=r,t.onload=()=>{const e=$.current,r=L.current;r.clearRect(0,0,e.width/2,e.height/2),r.drawImage(t,0,0,e.width/2,e.height/2)},D([...U])},isDisabled:U.length<=1,"aria-label":"Undo"})}),(0,S.jsx)(u.m,{label:"Redo",children:(0,S.jsx)(x.K,{icon:(0,S.jsx)(k.h,{icon:y.Swo}),onClick:()=>{if(0===A.length)return;const e=A.pop(),r=new Image;r.src=e,r.onload=()=>{const e=$.current,t=L.current;t.clearRect(0,0,e.width/2,e.height/2),t.drawImage(r,0,0,e.width/2,e.height/2)},D((r=>[...r,e])),P([...A])},isDisabled:0===A.length,"aria-label":"Redo"})}),(0,S.jsx)(u.m,{label:"Clear",children:(0,S.jsx)(x.K,{icon:(0,S.jsx)(k.h,{icon:y.qbC}),onClick:()=>{const e=$.current,r=L.current;X(),r.clearRect(0,0,e.width/2,e.height/2)},"aria-label":"Clear canvas"})})]})]}),(0,S.jsx)(s.a,{position:"relative",borderWidth:"1px",borderColor:Q,borderRadius:"md",overflow:"hidden",height:"200px",children:(0,S.jsx)("canvas",{ref:$,style:{width:"100%",height:"100%",backgroundColor:V,cursor:"pencil"===v?"crosshair":"eraser"===v?"cell":"crosshair"},onMouseDown:e=>{let{nativeEvent:r}=e;const{offsetX:t,offsetY:n}=r;"pencil"===v||"eraser"===v?(L.current.beginPath(),L.current.moveTo(t,n),K(!0)):"circle"!==v&&"rectangle"!==v||(O.current={x:t,y:n},K(!0))},onMouseMove:e=>{let{nativeEvent:r}=e;if(!M)return;const{offsetX:t,offsetY:n}=r;if("pencil"===v)L.current.lineTo(t,n),L.current.stroke();else if("eraser"===v){const e=L.current.strokeStyle;L.current.strokeStyle=V,L.current.lineTo(t,n),L.current.stroke(),L.current.strokeStyle=e}else if("circle"===v||"rectangle"===v){const e=$.current,r=L.current;if(U.length>0){const i=new Image;i.src=U[U.length-1],i.onload=()=>{r.clearRect(0,0,e.width/2,e.height/2),r.drawImage(i,0,0,e.width/2,e.height/2);const c=O.current;if("circle"===v){const e=Math.sqrt(Math.pow(t-c.x,2)+Math.pow(n-c.y,2));r.beginPath(),r.arc(c.x,c.y,e,0,2*Math.PI),r.stroke()}else"rectangle"===v&&(r.beginPath(),r.rect(c.x,c.y,t-c.x,n-c.y),r.stroke())}}}},onMouseUp:Y,onMouseLeave:Y})}),(0,S.jsxs)(o.s,{mt:2,justifyContent:"space-between",children:[(0,S.jsx)(C.E,{fontSize:"xs",color:"gray.500",children:"pencil"===v?"Drawing":"eraser"===v?"Erasing":"circle"===v?"Drawing circle":"Drawing rectangle"}),(0,S.jsxs)(d.e,{size:"xs",isAttached:!0,children:[(0,S.jsx)(u.m,{label:"Save",children:(0,S.jsx)(x.K,{icon:(0,S.jsx)(k.h,{icon:y.dIn}),onClick:()=>{if($.current){const e=document.createElement("a");e.download="whiteboard.png",e.href=$.current.toDataURL("image/png"),e.click()}},"aria-label":"Save whiteboard"})}),(0,S.jsx)(u.m,{label:"Share",children:(0,S.jsx)(x.K,{icon:(0,S.jsx)(k.h,{icon:y.A$}),onClick:()=>{$.current&&r&&$.current.toBlob((e=>{r(e,"whiteboard.png")}))},"aria-label":"Share whiteboard"})})]})]})]})})]})}}}]);
//# sourceMappingURL=795.c572b481.chunk.js.map