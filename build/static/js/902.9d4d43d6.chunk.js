"use strict";(self.webpackChunkuntitled=self.webpackChunkuntitled||[]).push([[902],{47902:(e,a,l)=>{l.r(a),l.d(a,{default:()=>i});var s=l(65043),t=l(58900),r=l(70579);const i=e=>{let{currentUser:a,onClose:l,onProfileUpdate:i}=e;const[n,o]=(0,s.useState)(""),[c,d]=(0,s.useState)(""),[u,p]=(0,s.useState)(null),[v,m]=(0,s.useState)(""),[f,h]=(0,s.useState)(!1);(0,s.useEffect)((()=>{(async()=>{if(null!==a&&void 0!==a&&a.id){const{profile:e}=await(0,t.VM)(a.id);if(e)return o(e.displayName||""),d(e.avatarUrl||""),void m(e.avatarUrl||"")}const e=JSON.parse(localStorage.getItem("user_profile"))||{};var l;e.displayName?o(e.displayName):o(`User-${null===a||void 0===a||null===(l=a.id)||void 0===l?void 0:l.substring(0,6)}`);e.avatarUrl&&(d(e.avatarUrl),m(e.avatarUrl))})()}),[a]);return(0,r.jsxs)("div",{className:"profile-container",children:[(0,r.jsxs)("div",{className:"profile-header",children:[(0,r.jsx)("h2",{children:"Edit Your Profile"}),(0,r.jsx)("button",{className:"close-button",onClick:l,children:"\xd7"})]}),(0,r.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),h(!0);try{var s;const e={displayName:n.trim()||`User-${null===a||void 0===a||null===(s=a.id)||void 0===s?void 0:s.substring(0,6)}`,avatarUrl:v||""};localStorage.setItem("user_profile",JSON.stringify(e)),null!==a&&void 0!==a&&a.id&&await(0,t.Yh)(a.id,e),i&&i(e),l()}catch(r){console.error("Failed to save profile:",r)}finally{h(!1)}},className:"profile-form",children:[(0,r.jsx)("div",{className:"avatar-preview",children:v?(0,r.jsx)("img",{src:v,alt:"Profile Preview",className:"avatar-image"}):(0,r.jsx)("div",{className:"avatar-placeholder",children:n?n.charAt(0).toUpperCase():"\ud83d\udc64"})}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{children:"Display Name:"}),(0,r.jsx)("input",{type:"text",value:n,onChange:e=>o(e.target.value),placeholder:"Enter your display name",className:"display-name-input"})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{children:"Upload Profile Picture:"}),(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const a=e.target.files[0];if(a)if(a.type.startsWith("image/")){p(a);const e=new FileReader;e.onload=e=>{m(e.target.result)},e.readAsDataURL(a)}else alert("Please select an image file")},className:"file-input"})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{children:"Or Choose an Avatar:"}),(0,r.jsx)("div",{className:"avatar-options",children:["\ud83d\udc64","\ud83d\udc69","\ud83d\udc68","\ud83d\udc67","\ud83d\udc66","\ud83d\udc75","\ud83d\udc74","\ud83d\udc71\u200d\u2640\ufe0f","\ud83d\udc71","\ud83d\udc78","\ud83e\udd34","\ud83d\udc70","\ud83e\udd35","\ud83d\udc7c","\ud83d\ude4d\u200d\u2640\ufe0f","\ud83d\ude4d","\ud83d\ude4e\u200d\u2640\ufe0f","\ud83d\ude4e","\ud83d\ude45\u200d\u2640\ufe0f","\ud83d\ude45"].map(((e,a)=>(0,r.jsx)("button",{type:"button",className:"avatar-option "+(v||e!==c?"":"selected"),onClick:()=>{d(e),m(""),p(null)},children:e},a)))})]}),(0,r.jsx)("button",{type:"submit",className:"save-button",disabled:f,children:f?"Saving...":"Save Profile"})]})]})}}}]);
//# sourceMappingURL=902.9d4d43d6.chunk.js.map